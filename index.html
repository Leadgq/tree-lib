<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vite App</title>
</head>

<body>
  <div id="app"></div>
  <!-- <script type="module" src="/main.js"></script> -->
  <script type="module">
    import {
      findPath,
      getObjectEntries,
      isAbleMap,
      getMapSize,
      genderMapAndSetMapKey,
      parseLocationUrlParams,
      toThousands,
      findChildrenListByFn,
      hidePhone,
      sleep,
      findTreeByTreeData,
      findCurrentNodeBrotherNode,
      isChildNode,
      after,
      nowTimeStamp,
      futureTimestamp,
      differenceTimestamp,
      isParentNode,
      objIsContainsKey,
      initBroadcastChannel
    } from "/main.js"

    const treeData = [
      {
        id: "1",
        name: '部门1',
        children: [
          {
            id: "1-1",
            name: '部门1-1',
            children: [
              {
                id: "1-1-1",
                name: '部门1-1-1',
                children: [
                  {
                    id: "1-1-1-1",
                    name: '部门1-1-1-1',
                    children: [
                      {
                        id: "1-1-1-1-1",
                        name: '部门1-1-1-1-1',
                        children: []
                      }
                    ]
                  },
                  {
                    id: "1-1-1-2",
                    name: '部门1-1-1-2',
                    children: [
                      {
                        id: "1-1-1-1-2",
                        name: '部门1-1-1-1-2',
                        children: []
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            id: "1-2",
            name: '部门1-2',
            children: [
              {
                id: "1-2-1",
                name: '部门1-2-1',
                children: undefined,
              }
            ]
          },
        ]
      },
      {
        id: '2',
        name: '部门2',
        children: []
      }
    ]
    const node = findTreeByTreeData(treeData, 'id', '1-2-1');

    // console.log('节点', findPath(treeData, '1-1-1-1', 'id', true, true));
    // console.log('兄弟', findCurrentNodeBrotherNode(treeData, '1-1-1-1', 'id'));
    console.log('子节点', isChildNode(treeData, '1-1-1-1-2', 'id'));
    // console.log('父节点', isParentNode(treeData, '2', 'id'));
    // let list = [
    //   {
    //     name: '部门1',
    //     age: 33,
    //     id: 3
    //   },
    //   {
    //     name: '部门2',
    //     age: 33,
    //     id: 4
    //   }
    // ]
    // console.log(genderMapAndSetMapKey(list, 'id'));
    // setTimeout(() => {
    //   console.log(genderMapAndSetMapKey(list, 'id'));
    // }, 1000)
    // console.log(parseLocationUrlParams());
    // console.log(toThousands('12345678903123123'));

    // const list = ['1-2', '1-1']
    // console.log(findChildrenListByFn(treeData, (item) => {
    //   return list.includes(item.id)
    // }));

    // // console.log(hidePhone(12345678901));
    // async function sleepTest() {
    //   const { promises, cancel } = sleep(3000)
    //   // cancel();
    //   const message = await promises;
    //   console.log(message);
    // }
    // sleepTest();

    // let saves = ['profile', 'settings', 'profile', 'settings'];

    // let done = after(() => {
    //   console.log('done');
    // });

    // saves.forEach(() => {
    //   console.log('循环');
    //   done();
    // })
    // console.log(nowTimeStamp());
    // console.log(futureTimestamp(1, 'day'));
    // const futureTimestampResult = futureTimestamp(1, 'minute');
    // console.log(futureTimestampResult);
    // console.log(differenceTimestamp(10, 'minute'));
    // const object = {
    //   name: '测手机'
    // }
    // console.log(objIsContainsKey(object, 'name'));

    const bor = initBroadcastChannel('message')
    bor.sendMessage('change', '我是发送的消息')


    setTimeout(() => {
      bor.receiveMessage((data) => {
        console.log(data);
      })
    }, 1000)
  </script>
</body>

</html>